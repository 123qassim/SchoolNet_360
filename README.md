# ðŸ« SchoolNet 360: Academic Management System (v8.0)

![Python Version](https://img.shields.io/badge/python-3.11+-blue.svg)
![Flask](https://img.shields.io/badge/flask-3.0-blueviolet.svg)
![Database](https://img.shields.io/badge/database-SQLAlchemy-red.svg)
![Build](https://img.shields.io/badge/build-passing-brightgreen.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

SchoolNet 360 is a modern, scalable, multi-tenant academic ecosystem. Built with Python and Flask, this platform allows multiple independent schools to manage their students, teachers, subjects, and grades from a central, cloud-ready application.

This version (v8.0) includes a full Parent Portal, an attendance tracking system, "smart" dynamic form calculation, and powerful bulk-data import tools for rapid deployment.

## âœ¨ Key Features

* **Multi-Tenant Architecture:** Each school (e.g., `GHS@1`, `MHS@2`) operates in its own sandboxed environment, ensuring data privacy.
* **Role-Based Access Control (RBAC):**
    * **Super Admin:** Manages all schools, can bulk-import new schools.
    * **School Admin:** Manages their school's students, teachers, subjects, and data.
    * **Teacher:** Enters grades and takes daily class attendance.
    * **Student:** Views their personal dashboard, analytics, and downloads reports.
    * **Parent:** Can create an account, link multiple children, and view their grades and attendance.
* **"Smart" Form System:** A student's form (Form 1-4) is **dynamically calculated** based on their `admission_year`, ensuring students automatically advance to the next form each year.
* **Parent Portal:** Parents can register and link to their students using a secure, one-time code generated by the School Admin.
* **Attendance Module:** A dedicated interface for teachers to take daily attendance by class. Attendance summaries are automatically visible to students and parents.
* **Bulk Data Management:**
    * **Super Admin:** Can bulk-import new schools and their admin accounts from an Excel file.
    * **School Admin:** Can bulk-import hundreds of subjects and students, including their initial login credentials.
* **Visual Analytics:** Interactive charts (via Chart.js) for student grade trends, class-wide grade distribution, and inter-school performance comparisons.
* **PDF Report Generation:** Students and parents can download high-quality, print-ready PDF report cards for any term.
* **AI-Powered Insights:** (v8.0+) Features AI-generated qualitative remarks for report cards and a predictive engine to estimate next term's performance.

## ðŸ’» Tech Stack

* **Backend:** Flask (Python)
* **Database:** SQLAlchemy (with SQLite for development, PostgreSQL-ready)
* **Authentication:** Flask-Login, Flask-WTF (with CSRF Protection)
* **Data & Analytics:** Pandas
* **File Handling:** `openpyxl` (for reading) & `xlsxwriter` (for writing) Excel files.
* **PDF Generation:** WeasyPrint
* **Frontend:** TailwindCSS, Alpine.js
* **Charts:** Chart.js

## ðŸ—‚ï¸ File Structure

```

SchoolNet\_360/
â”œâ”€â”€ app.py              \# Main Flask application (routes, forms, logic)
â”œâ”€â”€ models.py           \# SQLAlchemy database schema
â”œâ”€â”€ requirements.txt    \# Python dependencies
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ schools.csv     \# Mock data (used by csv\_tools)
â”‚   â”œâ”€â”€ users.csv       \# Mock data (used by csv\_tools)
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ ecosystem.db    \# The SQLite database (auto-generated)
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ analytics.py    \# Functions for Chart.js data
â”‚   â”œâ”€â”€ ai\_predictor.py \# AI remark generation logic
â”‚   â”œâ”€â”€ bulk\_importer.py\# NEW: Pandas logic for Excel uploads
â”‚   â”œâ”€â”€ csv\_tools.py    \# DB seeding script for first run
â”‚   â””â”€â”€ pdf\_generator.py\# WeasyPrint PDF generation logic
â””â”€â”€ templates/
â”œâ”€â”€ admin/          \# Admin CRUD pages
â”‚   â”œâ”€â”€ bulk\_manage.html  \# NEW: Bulk upload page
â”‚   â””â”€â”€ ...
â”œâ”€â”€ dashboards/     \# Role-specific dashboards
â”‚   â””â”€â”€ parent\_dashboard.html \# NEW
â”œâ”€â”€ teacher/        \# NEW: Teacher-specific pages
â”‚   â”œâ”€â”€ take\_attendance.html
â”‚   â””â”€â”€ attendance\_roster.html
â”œâ”€â”€ reports/        \# PDF report card template
â”œâ”€â”€ parent\_register.html    \# NEW
â”œâ”€â”€ parent\_link\_student.html\# NEW
â””â”€â”€ ...             \# Login, base, error pages, etc.

````

## ðŸš€ Getting Started

### 1. Prerequisites

* **Python 3.11+**
* **Pip** (Python Package Installer)
* **Git**

### 2. WeasyPrint Installation (CRITICAL)

The PDF generation **will fail** without this step. `WeasyPrint` relies on system libraries that `pip` cannot install.

* **On Windows:**
    1.  Download and run the GTK+ for Windows installer. Search for "GTK+ for Windows Runtime Environment Installer".
* **On macOS:**
    ```bash
    brew install pango cairo gdk-pixbuf libffi
    ```
* **On Linux (Debian/Ubuntu):**
    ```bash
    sudo apt-get install python3-pango libcairo2 libpango-1.0-0 libpangoft2-1.0-0
    ```

### 3. Setup and Installation

1.  **Clone the Repository:**
    ```bash
    git clone [https://github.com/123qassim/SchoolNet_360.git](https://github.com/123qassim/SchoolNet_360.git)
    cd SchoolNet_360
    ```

2.  **Create a Virtual Environment** (Recommended):
    ```bash
    python -m venv venv
    ```
    * Windows: `venv\Scripts\activate`
    * macOS/Linux: `source venv/bin/activate`

3.  **Install Python Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
    *(This will install Flask, SQLAlchemy, Pandas, WeasyPrint, xlsxwriter, etc.)*

### 4. Run the Application

1.  **Run the Flask Server:**
    ```bash
    flask run
    ```
2.  The application will **automatically create and populate** the `data/ecosystem.db` file from the CSVs the first time it runs.

    * **To reset the database:** If you ever need to start over, just **delete the `data/ecosystem.db` file** and run `flask run` again. (You will need to do this if you change `models.py`).

3.  **Access the System:**
    Open your browser and navigate to: **http://127.0.0.1:5000**

## ðŸ” Sample Logins

Use these credentials (from `data/users.csv`) to test the different roles.

| Role | School | Flow | Username | Password |
| :--- | :--- | :--- | :--- | :--- |
| **Super Admin** | N/A | Homepage -> "Super Admin Login" | `superadmin` | `super123` |
| **School Admin** | Greenhill | Select "Greenhill" -> "School Admin" | `ghs_admin` | `admin123` |
| **Teacher** | Greenhill | Select "Greenhill" -> "Teacher" | `ghs_teacher1` | `teacher123` |
| **Student** | Greenhill | Select "Greenhill" -> "Student" | `ghs_student1` | `student123` |
| **Student (Form 2)**| Greenhill | Select "Greenhill" -> "Student" | `ghs_student3` | `student123` |
| **Student (Form 3)**| St. Thomas | Select "St. Thomas" -> "Student" | `stc_student1` | `student123` |

### Testing The Parent Portal

1.  Go to the homepage, select a school (e.g., "Greenhill").
2.  Select "Parent" and click "**Create Parent Account**".
3.  Fill in the details to create your parent login.
4.  You will be redirected to the "Link Student" page.
5.  Log in as a **School Admin** (e.g., `ghs_admin`).
6.  Go to "Manage Students" and find a student (e.g., Alice Smith).
7.  Click "**Generate New Code**" and **copy the full 36-character code**.
8.  Go back to your Parent account and paste the code to link the student.

---
## License

This project is licensed under the MIT License.
````